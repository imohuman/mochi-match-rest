# Websocket サーバ要件書

## Websocket サーバについて

- クライアントからのリクエストに応じて、
  通知対象のクライアントにメッセージの転送を行います。

## 認証について

- WebSocket を利用するには、初期接続時にトークンを用いた認証を行います。
- トークンを用いた認証は Websocket サーバにて行います。
- トークンは別サーバ（API）にて発行されたものを使用します。
- 認証は以下の手順で行います。

  1. クライアントとサーバ間で Websocket 接続を確立します。
  2. サーバはクエリで受け取ったトークンの有効性を確認します
  3. 有効性が確認されたらそのまま Websocket 接続を継続します。

     - 認証エラーになった場合、エラーメッセージ送信後、Websocket 接続が切断されます。
     - 一定時間以内に認証のリクエストメッセージがサーバに通知されない場合 Websocket 接続が切断されます。

- 認証シーケンス
  ![ww](https://drive.google.com/open?id=1BGm-J5k9U63h3KUO7Mqgq3MuOeTtpRRc)

## ユーザ情報取得 [GET /user]
